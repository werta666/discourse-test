<div class="shop-page">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <div class="shop-header">
    <div class="shop-title">
      <h1>{{model.title}}</h1>
      <p class="shop-status">çŠ¶æ€: {{model.status}} | æ›´æ–°æ—¶é—´: {{model.time}}</p>
    </div>
    
    <!-- è´­ç‰©è½¦æŒ‰é’® -->
    <div class="cart-button-container">
      <button class="btn btn-primary cart-toggle" {{on "click" this.toggleCart}}>
        ğŸ›’ è´­ç‰©è½¦ 
        {{#if this.cartItemCount}}
          <span class="cart-badge">{{this.cartItemCount}}</span>
        {{/if}}
      </button>
    </div>
  </div>

  <!-- åˆ†ç±»ç­›é€‰ -->
  <div class="category-filter">
    <h3>å•†å“åˆ†ç±»</h3>
    <div class="category-buttons">
      {{#each this.categories as |category|}}
        <button 
          class="btn category-btn {{if (eq this.selectedCategory category) 'active' 'btn-default'}}"
          {{on "click" (fn this.selectCategory category)}}
        >
          {{category}}
        </button>
      {{/each}}
    </div>
  </div>

  <!-- å•†å“å±•ç¤ºåŒº -->
  <div class="products-container">
    <div class="products-grid">
      {{#each this.filteredProducts as |product|}}
        <div class="product-card">
          <div class="product-image">{{product.image}}</div>
          <div class="product-info">
            <h4 class="product-name">{{product.name}}</h4>
            <p class="product-price">{{product.price}}</p>
            <p class="product-category">åˆ†ç±»: {{product.category}}</p>
            <p class="product-description">{{product.description}}</p>
          </div>
          <div class="product-actions">
            <button 
              class="btn btn-default view-btn"
              {{on "click" (fn this.viewProduct product)}}
            >
              æŸ¥çœ‹è¯¦æƒ…
            </button>
            <button 
              class="btn btn-primary add-to-cart-btn"
              {{on "click" (fn this.addToCart product)}}
            >
              åŠ å…¥è´­ç‰©è½¦
            </button>
          </div>
        </div>
      {{/each}}
    </div>
  </div>

  <!-- è´­ç‰©è½¦ä¾§è¾¹æ  -->
  {{#if this.showCart}}
    <div class="cart-overlay" {{on "click" this.toggleCart}}></div>
    <div class="cart-sidebar">
      <div class="cart-header">
        <h3>ğŸ›’ è´­ç‰©è½¦</h3>
        <button class="btn btn-default close-cart" {{on "click" this.toggleCart}}>Ã—</button>
      </div>
      
      <div class="cart-content">
        {{#if this.cartItems.length}}
          {{#each this.cartItems as |item|}}
            <div class="cart-item">
              <div class="cart-item-info">
                <span class="cart-item-image">{{item.product.image}}</span>
                <div class="cart-item-details">
                  <h5>{{item.product.name}}</h5>
                  <p>{{item.product.price}}</p>
                </div>
              </div>
              <div class="cart-item-controls">
                <button
                  class="btn btn-small quantity-btn"
                  {{on "click" (fn this.decreaseQuantity item.product.id)}}
                >
                  -
                </button>
                <span class="quantity">{{item.quantity}}</span>
                <button
                  class="btn btn-small quantity-btn"
                  {{on "click" (fn this.increaseQuantity item.product.id)}}
                >
                  +
                </button>
                <button 
                  class="btn btn-danger remove-btn"
                  {{on "click" (fn this.removeFromCart item.product.id)}}
                >
                  åˆ é™¤
                </button>
              </div>
            </div>
          {{/each}}
          
          <div class="cart-total">
            <h4>æ€»è®¡: Â¥{{this.cartTotal}}</h4>
            <button class="btn btn-primary checkout-btn" {{on "click" this.checkout}}>
              ç»“ç®—
            </button>
          </div>
        {{else}}
          <p class="empty-cart">è´­ç‰©è½¦ä¸ºç©º</p>
        {{/if}}
      </div>
    </div>
  {{/if}}

  <!-- å•†å“è¯¦æƒ…å¼¹çª— -->
  {{#if this.selectedProduct}}
    <div class="product-modal-overlay" {{on "click" this.closeProductDetail}}></div>
    <div class="product-modal">
      <div class="modal-header">
        <h3>{{this.selectedProduct.name}}</h3>
        <button class="btn btn-default close-modal" {{on "click" this.closeProductDetail}}>Ã—</button>
      </div>
      <div class="modal-content">
        <div class="modal-image">{{this.selectedProduct.image}}</div>
        <div class="modal-info">
          <p class="modal-price">{{this.selectedProduct.price}}</p>
          <p class="modal-category">åˆ†ç±»: {{this.selectedProduct.category}}</p>
          <p class="modal-description">{{this.selectedProduct.description}}</p>
          <button 
            class="btn btn-primary modal-add-to-cart"
            {{on "click" (fn this.addToCart this.selectedProduct)}}
          >
            åŠ å…¥è´­ç‰©è½¦
          </button>
        </div>
      </div>
    </div>
  {{/if}}

  <!-- é¡µé¢åº•éƒ¨ -->
  <div class="shop-footer">
    <LinkTo @route="discovery.latest" class="btn btn-default">
      â† è¿”å›è®ºå›
    </LinkTo>
    <p class="shop-info">
      Ember {{model.ember_version}} | æ’ä»¶ç‰ˆæœ¬ {{model.plugin_version}}
    </p>
  </div>
</div>
